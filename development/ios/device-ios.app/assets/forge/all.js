/*! Copyright 2011 Trigger Corp. All rights reserved. */
(function(){var n={};n.config={modules:{logging:{level:"DEBUG"}}};n.config.uuid="UUID_HERE";var o={};o.listeners={};var q={};var i=[];var h=null;var a=false;var t=function(){if(i.length>0){if(!o.debug||window.catalystConnected){a=true;while(i.length>0){var u=i.shift();if(u[0]=="logging.log"){console.log(u[1].message)}o.priv.call.apply(o.priv,u)}a=false}else{h=setTimeout(t,500)}}};o.priv={call:function(C,B,A,v){if((!o.debug||window.catalystConnected||C==="internal.showDebugWarning")&&(i.length==0||a)){var u=n.tools.UUID();var y=true;if(C==="button.onClicked.addListener"||C==="message.toFocussed"){y=false}if(A||v){q[u]={success:A,error:v,onetime:y}}var w={callid:u,method:C,params:B};o.priv.send(w);if(window._forgeDebug){try{w.start=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiRequest(w)}catch(z){}}}else{i.push(arguments);if(!h){h=setTimeout(t,500)}}},send:function(u){throw new Error("Forge error: missing bridge to privileged code")},receive:function(u){if(u.callid){if(typeof q[u.callid]===undefined){n.log("Nothing stored for call ID: "+u.callid)}var w=q[u.callid];var v=(typeof u.content==="undefined"?null:u.content);if(w&&w[u.status]){w[u.status](u.content)}if(w&&w.onetime){delete q[u.callid]}if(window._forgeDebug){try{u.end=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiResponse(u)}catch(y){}}}else{if(u.event){if(o.listeners[u.event]){o.listeners[u.event].forEach(function(z){if(u.params){z(u.params)}else{z()}})}if(window._forgeDebug){try{u.start=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiEvent(u)}catch(y){}}}}}};o.addEventListener=function(u,v){if(o.listeners[u]){o.listeners[u].push(v)}else{o.listeners[u]=[v]}};o.generateQueryString=function(v){if(!v){return""}if(!(v instanceof Object)){return new String(v).toString()}var w=[];var u=function(A,z){if(A instanceof Array){var y=(z?z:"")+"[]";for(x in A){u(A[x],y)}}else{if(A instanceof Object){for(x in A){var y=x;if(z){y=z+"["+x+"]"}u(A[x],y)}}else{w.push(encodeURIComponent(z)+"="+encodeURIComponent(A))}}};u(v);return w.join("&").replace("%20","+")};o.generateMultipartString=function(u,w){if(typeof u==="string"){return""}var v="";for(key in u){v+="--"+w+"\r\n";v+='Content-Disposition: form-data; name="'+key.replace('"','\\"')+'"\r\n\r\n';v+=u[key].toString()+"\r\n"}return v},o.generateURI=function(v,u){var w="";if(v.indexOf("?")!==-1){w+=v.split("?")[1]+"&";v=v.split("?")[0]}w+=this.generateQueryString(u)+"&";w=w.substring(0,w.length-1);return v+(w?"?"+w:"")};n.enableDebug=function(){o.debug=true;o.priv.call("internal.showDebugWarning",{},null,null);o.priv.call("internal.hideDebugWarning",{},null,null)};setTimeout(function(){if(window.forge.debug){alert("Warning!\n\n'forge.debug = true;' is no longer supported\n\nUse 'forge.enableDebug();' instead.")}},3000);n.is={mobile:function(){return false},desktop:function(){return false},android:function(){return false},ios:function(){return false},chrome:function(){return false},firefox:function(){return false},safari:function(){return false},ie:function(){return false},web:function(){return false},orientation:{portrait:function(){return false},landscape:function(){return false}},connection:{connected:function(){return true},wifi:function(){return true}}};n.button={setIcon:function(v,w,u){o.priv.call("button.setIcon",v,w,u)},setURL:function(v,w,u){o.priv.call("button.setURL",v,w,u)},onClicked:{addListener:function(u){o.priv.call("button.onClicked.addListener",null,u)}},setBadge:function(v,w,u){o.priv.call("button.setBadge",v,w,u)},setBadgeBackgroundColor:function(v,w,u){o.priv.call("button.setBadgeBackgroundColor",v,w,u)},setTitle:function(w,v,u){o.priv.call("button.setTitle",w,v,u)}};n.message={listen:function(v,w,u){u&&u({message:"Forge Error: message.listen must be overridden by platform specific code",type:"UNAVAILABLE"})},broadcast:function(v,w,y,u){u&&u({message:"Forge Error: message.broadcast must be overridden by platform specific code",type:"UNAVAILABLE"})},broadcastBackground:function(v,w,y,u){u&&u({message:"Forge Error: message.broadcastBackground must be overridden by platform specific code",type:"UNAVAILABLE"})},toFocussed:function(v,w,y,u){o.priv.call("message.toFocussed",{type:v,content:w},y,u)}};n.notification={create:function(y,w,v,u){o.priv.call("notification.create",{title:y,text:w},v,u)}};n.request={get:function(v,w,u){n.request.ajax({url:v,dataType:"text",success:w&&function(){try{arguments[0]=JSON.parse(arguments[0])}catch(y){}w.apply(this,arguments)},error:u})},ajax:function(w){var u=w.dataType;if(u=="xml"){w.dataType="text"}var y=w.success&&function(B){try{if(u=="xml"){var A,z;if(window.DOMParser){A=new DOMParser();z=A.parseFromString(B,"text/xml")}else{z=new ActiveXObject("Microsoft.XMLDOM");z.async="false";z.loadXML(B)}B=z}}catch(C){}w.success&&w.success(B)};var v=w.error&&function(z){if(z.status=="error"&&!z.err){n.logging.log("AJAX request to "+w.url+" failed, have you included that url in the permissions section of the config file for this app?")}w.error&&w.error(z)};o.priv.call("request.ajax",w,y,v)}};n.tools={UUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(y){var w=Math.random()*16|0;var u=y=="x"?w:(w&3|8);return u.toString(16)}).toUpperCase()},getURL:function(v,w,u){o.priv.call("tools.getURL",{name:v.toString()},w,u)}};var j=function(B,z,C){var w=[];stylize=function(E,D){return E};function u(D){return D instanceof RegExp||(typeof D==="object"&&Object.prototype.toString.call(D)==="[object RegExp]")}function v(D){return D instanceof Array||Array.isArray(D)||(D&&D!==Object.prototype&&v(D.__proto__))}function y(F){if(F instanceof Date){return true}if(typeof F!=="object"){return false}var D=Date.prototype&&Object.getOwnPropertyNames(Date.prototype);var E=F.__proto__&&Object.getOwnPropertyNames(F.__proto__);return JSON.stringify(E)===JSON.stringify(D)}function A(P,M){try{if(P&&typeof P.inspect==="function"&&!(P.constructor&&P.constructor.prototype===P)){return P.inspect(M)}switch(typeof P){case"undefined":return stylize("undefined","undefined");case"string":var D="'"+JSON.stringify(P).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return stylize(D,"string");case"number":return stylize(""+P,"number");case"boolean":return stylize(""+P,"boolean")}if(P===null){return stylize("null","null")}if(P instanceof Document){return(new XMLSerializer()).serializeToString(P)}var J=Object.keys(P);var Q=z?Object.getOwnPropertyNames(P):J;if(typeof P==="function"&&Q.length===0){var E=P.name?": "+P.name:"";return stylize("[Function"+E+"]","special")}if(u(P)&&Q.length===0){return stylize(""+P,"regexp")}if(y(P)&&Q.length===0){return stylize(P.toUTCString(),"date")}var F,N,K;if(v(P)){N="Array";K=["[","]"]}else{N="Object";K=["{","}"]}if(typeof P==="function"){var I=P.name?": "+P.name:"";F=" [Function"+I+"]"}else{F=""}if(u(P)){F=" "+P}if(y(P)){F=" "+P.toUTCString()}if(Q.length===0){return K[0]+F+K[1]}if(M<0){if(u(P)){return stylize(""+P,"regexp")}else{return stylize("[Object]","special")}}w.push(P);var H=Q.map(function(S){var R,T;if(P.__lookupGetter__){if(P.__lookupGetter__(S)){if(P.__lookupSetter__(S)){T=stylize("[Getter/Setter]","special")}else{T=stylize("[Getter]","special")}}else{if(P.__lookupSetter__(S)){T=stylize("[Setter]","special")}}}if(J.indexOf(S)<0){R="["+S+"]"}if(!T){if(w.indexOf(P[S])<0){if(M===null){T=A(P[S])}else{T=A(P[S],M-1)}if(T.indexOf("\n")>-1){if(v(P)){T=T.split("\n").map(function(U){return"  "+U}).join("\n").substr(2)}else{T="\n"+T.split("\n").map(function(U){return"   "+U}).join("\n")}}}else{T=stylize("[Circular]","special")}}if(typeof R==="undefined"){if(N==="Array"&&S.match(/^\d+$/)){return T}R=JSON.stringify(""+S);if(R.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){R=R.substr(1,R.length-2);R=stylize(R,"name")}else{R=R.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");R=stylize(R,"string")}}return R+": "+T});w.pop();var O=0;var G=H.reduce(function(R,S){O++;if(S.indexOf("\n")>=0){O++}return R+S.length+1},0);if(G>50){H=K[0]+(F===""?"":F+"\n ")+" "+H.join(",\n  ")+" "+K[1]}else{H=K[0]+F+" "+H.join(", ")+" "+K[1]}return H}catch(L){return"[No string representation]"}}return A(B,(typeof C==="undefined"?2:C))};var b=function(v,w){if("logging" in n.config){var u=n.config.logging.marker||"FORGE"}else{var u="FORGE"}v="["+u+"] "+(v.indexOf("\n")===-1?"":"\n")+v;o.priv.call("logging.log",{message:v,level:w});if(typeof console!=="undefined"){switch(w){case 10:if(console.debug!==undefined&&!(console.debug.toString&&console.debug.toString().match("alert"))){console.debug(v)}break;case 30:if(console.warn!==undefined&&!(console.warn.toString&&console.warn.toString().match("alert"))){console.warn(v)}break;case 40:case 50:if(console.error!==undefined&&!(console.error.toString&&console.error.toString().match("alert"))){console.error(v)}break;default:case 20:if(console.info!==undefined&&!(console.info.toString&&console.info.toString().match("alert"))){console.info(v)}break}}};var m=function(u,v){if(u in n.logging.LEVELS){return n.logging.LEVELS[u]}else{n.logging.__logMessage("Unknown configured logging level: "+u);return v}};var r=function(v){var z=function(A){if(A.message){return A.message}else{if(A.description){return A.description}else{return""+A}}};if(v){var y="\nError: "+z(v);try{if(v.lineNumber){y+=" on line number "+v.lineNumber}if(v.fileName){var u=v.fileName;y+=" in file "+u.substr(u.lastIndexOf("/")+1)}}catch(w){}if(v.stack){y+="\r\nStack trace:\r\n"+v.stack}return y}return""};n.logging={LEVELS:{ALL:0,DEBUG:10,INFO:20,WARNING:30,ERROR:40,CRITICAL:50},debug:function(v,u){n.logging.log(v,u,n.logging.LEVELS.DEBUG)},info:function(v,u){n.logging.log(v,u,n.logging.LEVELS.INFO)},warning:function(v,u){n.logging.log(v,u,n.logging.LEVELS.WARNING)},error:function(v,u){n.logging.log(v,u,n.logging.LEVELS.ERROR)},critical:function(v,u){n.logging.log(v,u,n.logging.LEVELS.CRITICAL)},log:function(v,u,z){if(typeof(z)==="undefined"){var z=n.logging.LEVELS.INFO}try{var w=m(n.config.logging.level,n.logging.LEVELS.ALL)}catch(y){var w=n.logging.LEVELS.ALL}if(z>=w){b(j(v,false,10)+r(u),z)}}};var l=function(z){if(z=="<all_urls>"){z="*://*"}z=z.split("://");var u=z[0];var w,y;if(z[1].indexOf("/")===-1){w=z[1];y=""}else{w=z[1].substring(0,z[1].indexOf("/"));y=z[1].substring(z[1].indexOf("/"))}var v="";if(u=="*"){v+=".*://"}else{v+=u+"://"}if(w=="*"){v+=".*"}else{if(w.indexOf("*.")===0){v+="(.+.)?"+w.substring(2)}else{v+=w}}v+=y.replace(/\*/g,".*");return"^"+v+"$"};n.tabs={open:function(v,w,y,u){if(typeof w==="function"){u=y;y=w;w=false}o.priv.call("tabs.open",{url:v,keepFocus:w},y,u)},openWithOptions:function(v,y,u){var w=undefined;if(v.pattern){v.pattern=l(v.pattern)}o.priv.call("tabs.open",v,y,u)},closeCurrent:function(u){u=arguments[1]||u;var v=n.tools.UUID();location.hash=v;o.priv.call("tabs.closeCurrent",{hash:v},null,u)}};n.prefs={get:function(v,w,u){o.priv.call("prefs.get",{key:v.toString()},w&&function(y){if(y==="undefined"){y=undefined}else{try{y=JSON.parse(y)}catch(z){u({message:z.toString()});return}}w(y)},u)},set:function(v,w,y,u){if(w===undefined){w="undefined"}else{w=JSON.stringify(w)}o.priv.call("prefs.set",{key:v.toString(),value:w},y,u)},keys:function(v,u){o.priv.call("prefs.keys",{},v,u)},all:function(v,u){var v=v&&function(w){for(key in w){if(w[key]==="undefined"){w[key]=undefined}else{w[key]=JSON.parse(w[key])}}v(w)};o.priv.call("prefs.all",{},v,u)},clear:function(v,w,u){o.priv.call("prefs.clear",{key:v.toString()},w,u)},clearAll:function(v,u){o.priv.call("prefs.clearAll",{},v,u)}};n.file={getImage:function(v,w,u){if(typeof v==="function"){u=w;w=v;v={}}if(!v){v={}}o.priv.call("file.getImage",v,w&&function(z){var y={uri:z,name:"Image",type:"image"};if(v.width){y.width=v.width}if(v.height){y.height=v.height}w(y)},u)},getVideo:function(v,w,u){if(typeof v==="function"){u=w;w=v;v={}}if(!v){v={}}o.priv.call("file.getVideo",v,w&&function(z){var y={uri:z,name:"Video",type:"video"};w(y)},u)},getLocal:function(v,w,u){n.tools.getURL(v,function(y){w({uri:y,name:v})},u)},base64:function(v,w,u){o.priv.call("file.base64",v,w,u)},string:function(v,w,u){n.request.ajax({url:v.uri,success:w,error:u})},URL:function(w,y,z,v){if(typeof y==="function"){v=z;z=y}var u={};for(prop in w){u[prop]=w[prop]}u.height=y.height||w.height||undefined;u.width=y.width||w.width||undefined;o.priv.call("file.URL",u,z,v)},isFile:function(v,w,u){if(!v||!("uri" in v)){w(false)}else{o.priv.call("file.isFile",v,w,u)}},cacheURL:function(v,w,u){o.priv.call("file.cacheURL",{url:v},w&&function(y){w({uri:y})},u)},remove:function(v,w,u){o.priv.call("file.remove",v,w,u)},clearCache:function(v,u){o.priv.call("file.clearCache",{},v,u)}};var s={};o.currentOrientation=s;o.currentConnectionState=s;n.event={menuPressed:{addListener:function(v,u){o.addEventListener("menuPressed",v)}},messagePushed:{addListener:function(v,u){o.addEventListener("event.messagePushed",v)}},orientationChange:{addListener:function(v,u){o.addEventListener("event.orientationChange",v);if(o.currentOrientation!==s){o.priv.receive({event:"event.orientationChange"})}}},connectionStateChange:{addListener:function(v,u){o.addEventListener("event.connectionStateChange",v);if(o.currentConnectionState!==s){o.priv.receive({event:"event.connectionStateChange"})}}}};n.contact={select:function(v,u){o.priv.call("contact.select",{},v,u)}};n.geolocation={getCurrentPosition:function(y,w,z){if(typeof(y)==="object"){var v=y,A=w,u=z}else{var A=y,u=w,v=z}return navigator.geolocation.getCurrentPosition(A,u,v)}};n.internal={ping:function(v,w,u){o.priv.call("internal.ping",{data:[v]},w,u)}};n.sms={send:function(y,w,u){if(y.to&&typeof y.to=="string"){y.to=[y.to]}var v={body:y.body||"",to:y.to||[]};o.priv.call("sms.send",v,w,u)}};n.topbar={show:function(v,u){o.priv.call("topbar.show",{},v,u)},hide:function(v,u){o.priv.call("topbar.hide",{},v,u)},setTitle:function(w,v,u){o.priv.call("topbar.setTitle",{title:w},v,u)},setTitleImage:function(v,w,u){if(v&&v[0]==="/"){v=v.substr(1)}o.priv.call("topbar.setTitleImage",{icon:v},w,u)},setTint:function(u,w,v){o.priv.call("topbar.setTint",{color:u},w,v)},addButton:function(v,w,u){if(v.icon&&v.icon[0]==="/"){v.icon=v.icon.substr(1)}o.priv.call("topbar.addButton",v,function(y){w&&o.addEventListener("topbar.buttonPressed."+y,w)},u)},removeButtons:function(v,u){o.priv.call("topbar.removeButtons",{},v,u)},homePressed:{addListener:function(v,u){o.addEventListener("topbar.homePressed",v)}}};n.tabbar={show:function(v,u){o.priv.call("tabbar.show",{},v,u)},hide:function(v,u){o.priv.call("tabbar.hide",{},v,u)},addButton:function(w,v,u){if(w.icon&&w.icon[0]==="/"){w.icon=w.icon.substr(1)}o.priv.call("tabbar.addButton",w,function(y){v&&v({remove:function(A,z){o.priv.call("tabbar.removeButton",{id:y},A,z)},setActive:function(A,z){o.priv.call("tabbar.setActive",{id:y},A,z)},onPressed:{addListener:function(A,z){o.addEventListener("tabbar.buttonPressed."+y,A)}}})},u)},removeButtons:function(v,u){o.priv.call("tabbar.removeButtons",{},v,u)},setTint:function(u,w,v){o.priv.call("tabbar.setTint",{color:u},w,v)},setActiveTint:function(u,w,v){o.priv.call("tabbar.setActiveTint",{color:u},w,v)},setInactive:function(v,u){o.priv.call("tabbar.setInactive",{},v,u)}};n.media={videoPlay:function(v,w,u){if(!v.uri){v={uri:v}}o.priv.call("media.videoPlay",v,w,u)}};n.payments={purchaseProduct:function(v,w,u){o.priv.call("payments.purchaseProduct",{product:v},w,u)},restoreTransactions:function(v,u){o.priv.call("payments.restoreTransactions",{},v,u)},transactionReceived:{addListener:function(v,u){o.addEventListener("payments.transactionReceived",function(y){var w=function(){if(y.notificationId){o.priv.call("payments.confirmNotification",{id:y.notificationId})}};v(y,w)})}}};n.document={reload:function(){return document.location.reload()},location:function(v,u){v(document.location)}};var p=[];var g=false;o.priv.get=function(){var u=JSON.stringify(p);p=[];return u};var f=[],k="zero-timeout-message";function d(u){f.push(u);window.postMessage(k,"*")}function c(u){setTimeout(u,0)}function e(u){if(u.source==window&&u.data==k){if(u.stopPropagation){u.stopPropagation()}if(f.length){f.shift()()}}}if(window.postMessage){if(window.addEventListener){window.addEventListener("message",e,true)}else{if(window.attachEvent){window.attachEvent("onmessage",e)}}window.setZeroTimeout=d}else{window.setZeroTimeout=c}o.priv.send=function(u){p.push(u);if(g&&!window.forge._flushing){window.forge._flushing=true;c(function(){window.location.href="forge://go"})}};document.addEventListener("DOMContentLoaded",function(){g=true;window.forge._flushing=true;c(function(){window.location.href="forge://go"})},false);o.currentOrientation;o.addEventListener("internal.orientationChange",function(u){if(o.currentOrientation!=u.orientation){o.currentOrientation=u.orientation;o.priv.receive({event:"event.orientationChange"})}});o.currentConnectionState={connected:false,wifi:false};o.addEventListener("internal.connectionStateChange",function(u){if(u.connected!=o.currentConnectionState.connected||u.wifi!=o.currentConnectionState.wifi){o.currentConnectionState=u;o.priv.receive({event:"event.connectionStateChange"})}});n.is.mobile=function(){return true};n.is.ios=function(){return true};n.is.orientation.portrait=function(){return o.currentOrientation=="portrait"};n.is.orientation.landscape=function(){return o.currentOrientation=="landscape"};n.is.connection.connected=function(){return o.currentConnectionState.connected};n.is.connection.wifi=function(){return o.currentConnectionState.wifi};n.request.ajax=function(w){var B=(w.files?w.files:null);var K=(w.fileUploadMethod?w.fileUploadMethod:"multipart");var A=(w.url?w.url:null);var C=(w.success?w.success:undefined);var J=(w.error?w.error:undefined);var z=(w.username?w.username:null);var u=(w.password?w.password:null);var O=(w.accepts?w.accepts:["*/*"]);var G=(w.cache?w.cache:false);var M=(w.contentType?w.contentType:null);var P=(w.data?w.data:null);var I=(w.dataType?w.dataType:null);var v=(w.headers?w.headers:{});var D=(w.timeout?w.timeout:60000);var y=(w.type?w.type:"GET");if(typeof O==="string"){O=[O]}var L=null;if(B){y="POST";if(K=="multipart"){L=n.tools.UUID().replace(/-/g,"");P=o.generateMultipartString(P,L);M="multipart/form-data; boundary="+L}else{if(K=="raw"){if(B.length>1){n.logging.warning("Only one file can be uploaded at once with type 'raw'");B=[B[0]]}P=null;M="image/jpg"}}}else{if(y=="GET"){A=o.generateURI(A,P);P=null}else{if(P){P=o.generateQueryString(P);if(!M){M="application/x-www-form-urlencoded"}}}}if(G){G={};G["wm"+Math.random()]=Math.random();A=o.generateURI(A,G)}if(O){v.Accept=O.join(",")}if(M){v["Content-Type"]=M}var H={};if(window._forgeDebug){try{H.id=n.tools.UUID();H.fromUrl=window.location.href;H.reqTime=(new Date()).getTime()/1000;H.method=y;H.data=P;H.url=A;_forgeDebug.wi.NetworkNotify.identifierForInitialRequest(H.id,H.url,{url:H.fromUrl,frameId:0,loaderId:0},[]);_forgeDebug.wi.NetworkNotify.willSendRequest(H.id,H.reqTime,{url:H.url,httpMethod:H.method,httpHeaderFields:{},requestFormData:H.data},{isNull:true})}catch(N){}}var F=false;var E=setTimeout(function(){if(F){return}F=true;if(window._forgeDebug){try{H.respTime=(new Date()).getTime()/1000;H.respText=P;_forgeDebug.wi.NetworkNotify.didReceiveResponse(H.id,H.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Failure",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false,});_forgeDebug.wi.NetworkNotify.setInitialContent(H.id,H.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(H.id,H.respTime)}catch(Q){}}J&&J({message:"Request timed out",type:"EXPECTED_FAILURE"})},D);o.priv.call("request.ajax",{url:A,username:z,password:u,data:P,headers:v,timeout:D,type:y,boundary:L,files:B,fileUploadMethod:K},function(S){clearTimeout(E);if(F){return}F=true;if(window._forgeDebug){try{H.respTime=(new Date()).getTime()/1000;H.respText=S;_forgeDebug.wi.NetworkNotify.didReceiveResponse(H.id,H.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Success",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false,});_forgeDebug.wi.NetworkNotify.setInitialContent(H.id,H.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(H.id,H.respTime)}catch(T){}}try{if(I=="xml"){var R,Q;if(window.DOMParser){R=new DOMParser();Q=R.parseFromString(S,"text/xml")}else{Q=new ActiveXObject("Microsoft.XMLDOM");Q.async="false";Q.loadXML(S)}S=Q}else{if(I=="json"){S=JSON.parse(S)}}}catch(T){}C&&C(S)},function(){clearTimeout(E);if(F){return}F=true;if(window._forgeDebug){try{H.respTime=(new Date()).getTime()/1000;H.respText=P;_forgeDebug.wi.NetworkNotify.didReceiveResponse(H.id,H.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Failure",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false,});_forgeDebug.wi.NetworkNotify.setInitialContent(H.id,H.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(H.id,H.respTime)}catch(Q){}}J&&J.apply(this,arguments)})};n.geolocation={getCurrentPosition:function(y,w,z){if(typeof(y)==="object"){var v=y,A=w,u=z}else{var A=y,u=w,v=z}o.priv.call("geolocation.getCurrentPosition",v,A,u)}};n.file.getLocal=function(v,w,u){o.priv.call("file.getLocal",{name:v},w,u)};n.file.string=function(v,w,u){o.priv.call("file.string",v,w,u)};window.forge={config:n.config,enableDebug:n.enableDebug,is:{mobile:n.is.mobile,desktop:n.is.desktop,android:n.is.android,ios:n.is.ios,chrome:n.is.chrome,firefox:n.is.firefox,safari:n.is.safari,ie:n.is.ie,web:n.is.web,orientation:{portrait:n.is.orientation.portrait,landscape:n.is.orientation.landscape},connection:{connected:n.is.connection.connected,wifi:n.is.connection.wifi}},message:{listen:n.message.listen,broadcast:n.message.broadcast,broadcastBackground:n.message.broadcastBackground,toFocussed:n.message.toFocussed},notification:{create:n.notification.create},request:{get:n.request.get,ajax:n.request.ajax},logging:{log:n.logging.log,debug:n.logging.debug,info:n.logging.info,warning:n.logging.warning,error:n.logging.error,critical:n.logging.critical},tabs:{open:n.tabs.open,openWithOptions:n.tabs.openWithOptions,closeCurrent:n.tabs.closeCurrent},tools:{UUID:n.tools.UUID,getURL:n.tools.getURL},prefs:{get:n.prefs.get,set:n.prefs.set,clear:n.prefs.clear,clearAll:n.prefs.clearAll,keys:n.prefs.keys},button:{setIcon:n.button.setIcon,setURL:n.button.setURL,onClicked:{addListener:n.button.onClicked.addListener},setBadge:n.button.setBadge,setBadgeBackgroundColor:n.button.setBadgeBackgroundColor,setTitle:n.button.setTitle},file:{getImage:n.file.getImage,getVideo:n.file.getVideo,getLocal:n.file.getLocal,isFile:n.file.isFile,URL:n.file.URL,base64:n.file.base64,string:n.file.string,cacheURL:n.file.cacheURL,remove:n.file.remove,clearCache:n.file.clearCache},media:{videoPlay:n.media.videoPlay},event:{menuPressed:{addListener:n.event.menuPressed.addListener},messagePushed:{addListener:n.event.messagePushed.addListener},orientationChange:{addListener:n.event.orientationChange.addListener},connectionStateChange:{addListener:n.event.connectionStateChange.addListener}},contact:{select:n.contact.select},geolocation:{getCurrentPosition:n.geolocation.getCurrentPosition},internal:{ping:n.internal.ping},sms:{send:n.sms.send},topbar:{show:n.topbar.show,hide:n.topbar.hide,setTitle:n.topbar.setTitle,setTitleImage:n.topbar.setTitleImage,setTint:n.topbar.setTint,addButton:n.topbar.addButton,removeButtons:n.topbar.removeButtons,homePressed:{addListener:n.topbar.homePressed.addListener}},tabbar:{show:n.tabbar.show,hide:n.tabbar.hide,addButton:n.tabbar.addButton,removeButtons:n.tabbar.removeButtons,setTint:n.tabbar.setTint,setActiveTint:n.tabbar.setActiveTint,setInactive:n.tabbar.setInactive},payments:{purchaseProduct:n.payments.purchaseProduct,restoreTransactions:n.payments.restoreTransactions,transactionReceived:{addListener:n.payments.transactionReceived.addListener}},media:{videoPlay:n.media.videoPlay},document:{reload:n.document.reload,location:n.document.location}};window.forge["ajax"]=n.request.ajax;window.forge["getPage"]=n.request.get;window.forge["createNotification"]=n.notification.create;window.forge["UUID"]=n.tools.UUID;window.forge["getURL"]=n.tools.getURL;window.forge["log"]=n.logging.log;window.forge["button"]["setUrl"]=n.button.setURL;window.forge["button"]["setBadgeText"]=n.button.setBadge;window.forge["file"]["delete"]=n.file.remove;window.forge["file"]["imageURL"]=n.file.URL;window.forge["_get"]=o.priv.get;window.forge["_receive"]=function(){var u=arguments;if(typeof window.setZeroTimeout==="undefined"){setTimeout(function(){o.priv.receive.apply(this,u)},0)}else{c(function(){o.priv.receive.apply(this,u)})}};window.forge["_dispatchMessage"]=o.dispatchMessage})();