/*! Copyright 2011 Trigger Corp. All rights reserved. */
(function(){var k={};k.config={modules:{logging:{level:"DEBUG"}}};k.config.uuid="UUID_HERE";var g={};g.listeners={};var c={};var f=[];var e=null;var j=false;var m=function(){if(f.length>0){if(!g.debug||window.catalystConnected){j=true;while(f.length>0){var n=f.shift();if(n[0]=="logging.log"){console.log(n[1].message)}g.priv.call.apply(g.priv,n)}j=false}else{e=setTimeout(m,500)}}};g.priv={call:function(u,t,s,o){if((!g.debug||window.catalystConnected||u==="internal.showDebugWarning")&&(f.length==0||j)){var n=k.tools.UUID();var q=true;if(u==="button.onClicked.addListener"||u==="message.toFocussed"){q=false}if(s||o){c[n]={success:s,error:o,onetime:q}}var p={callid:n,method:u,params:t};g.priv.send(p);if(window._forgeDebug){try{p.start=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiRequest(p)}catch(r){}}}else{f.push(arguments);if(!e){e=setTimeout(m,500)}}},send:function(n){throw new Error("Forge error: missing bridge to privileged code")},receive:function(n){if(n.callid){if(typeof c[n.callid]===undefined){k.log("Nothing stored for call ID: "+n.callid)}var p=c[n.callid];var o=(typeof n.content==="undefined"?null:n.content);if(p&&p[n.status]){p[n.status](n.content)}if(p&&p.onetime){delete c[n.callid]}if(window._forgeDebug){try{n.end=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiResponse(n)}catch(q){}}}else{if(n.event){if(g.listeners[n.event]){g.listeners[n.event].forEach(function(r){if(n.params){r(n.params)}else{r()}})}if(window._forgeDebug){try{n.start=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiEvent(n)}catch(q){}}}}}};g.addEventListener=function(n,o){if(g.listeners[n]){g.listeners[n].push(o)}else{g.listeners[n]=[o]}};g.generateQueryString=function(o){if(!o){return""}if(!(o instanceof Object)){return new String(o).toString()}var p=[];var n=function(s,r){if(s instanceof Array){var q=(r?r:"")+"[]";for(x in s){n(s[x],q)}}else{if(s instanceof Object){for(x in s){var q=x;if(r){q=r+"["+x+"]"}n(s[x],q)}}else{p.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}}};n(o);return p.join("&").replace("%20","+")};g.generateMultipartString=function(n,p){if(typeof n==="string"){return""}var o="";for(key in n){o+="--"+p+"\r\n";o+='Content-Disposition: form-data; name="'+key.replace('"','\\"')+'"\r\n\r\n';o+=n[key].toString()+"\r\n"}return o},g.generateURI=function(o,n){var p="";if(o.indexOf("?")!==-1){p+=o.split("?")[1]+"&";o=o.split("?")[0]}p+=this.generateQueryString(n)+"&";p=p.substring(0,p.length-1);return o+(p?"?"+p:"")};k.enableDebug=function(){g.debug=true;g.priv.call("internal.showDebugWarning",{},null,null);g.priv.call("internal.hideDebugWarning",{},null,null)};setTimeout(function(){if(window.forge.debug){alert("Warning!\n\n'forge.debug = true;' is no longer supported\n\nUse 'forge.enableDebug();' instead.")}},3000);k.is={mobile:function(){return false},desktop:function(){return false},android:function(){return false},ios:function(){return false},chrome:function(){return false},firefox:function(){return false},safari:function(){return false},ie:function(){return false},web:function(){return false},orientation:{portrait:function(){return false},landscape:function(){return false}},connection:{connected:function(){return true},wifi:function(){return true}}};k.button={setIcon:function(o,p,n){g.priv.call("button.setIcon",o,p,n)},setURL:function(o,p,n){g.priv.call("button.setURL",o,p,n)},onClicked:{addListener:function(n){g.priv.call("button.onClicked.addListener",null,n)}},setBadge:function(o,p,n){g.priv.call("button.setBadge",o,p,n)},setBadgeBackgroundColor:function(o,p,n){g.priv.call("button.setBadgeBackgroundColor",o,p,n)},setTitle:function(p,o,n){g.priv.call("button.setTitle",p,o,n)}};k.message={listen:function(o,p,n){n&&n({message:"Forge Error: message.listen must be overridden by platform specific code",type:"UNAVAILABLE"})},broadcast:function(o,p,q,n){n&&n({message:"Forge Error: message.broadcast must be overridden by platform specific code",type:"UNAVAILABLE"})},broadcastBackground:function(o,p,q,n){n&&n({message:"Forge Error: message.broadcastBackground must be overridden by platform specific code",type:"UNAVAILABLE"})},toFocussed:function(o,p,q,n){g.priv.call("message.toFocussed",{type:o,content:p},q,n)}};k.notification={create:function(q,p,o,n){g.priv.call("notification.create",{title:q,text:p},o,n)}};k.request={get:function(o,p,n){k.request.ajax({url:o,dataType:"text",success:p&&function(){try{arguments[0]=JSON.parse(arguments[0])}catch(q){}p.apply(this,arguments)},error:n})},ajax:function(p){var n=p.dataType;if(n=="xml"){p.dataType="text"}var q=p.success&&function(t){try{if(n=="xml"){var s,r;if(window.DOMParser){s=new DOMParser();r=s.parseFromString(t,"text/xml")}else{r=new ActiveXObject("Microsoft.XMLDOM");r.async="false";r.loadXML(t)}t=r}}catch(u){}p.success&&p.success(t)};var o=p.error&&function(r){if(r.status=="error"&&!r.err){k.logging.log("AJAX request to "+p.url+" failed, have you included that url in the permissions section of the config file for this app?")}p.error&&p.error(r)};g.priv.call("request.ajax",p,q,o)}};k.tools={UUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var o=Math.random()*16|0;var n=p=="x"?o:(o&3|8);return n.toString(16)}).toUpperCase()},getURL:function(o,p,n){g.priv.call("tools.getURL",{name:o.toString()},p,n)}};var d=function(t,r,u){var p=[];stylize=function(w,v){return w};function n(v){return v instanceof RegExp||(typeof v==="object"&&Object.prototype.toString.call(v)==="[object RegExp]")}function o(v){return v instanceof Array||Array.isArray(v)||(v&&v!==Object.prototype&&o(v.__proto__))}function q(y){if(y instanceof Date){return true}if(typeof y!=="object"){return false}var v=Date.prototype&&Object.getOwnPropertyNames(Date.prototype);var w=y.__proto__&&Object.getOwnPropertyNames(y.__proto__);return JSON.stringify(w)===JSON.stringify(v)}function s(I,F){try{if(I&&typeof I.inspect==="function"&&!(I.constructor&&I.constructor.prototype===I)){return I.inspect(F)}switch(typeof I){case"undefined":return stylize("undefined","undefined");case"string":var v="'"+JSON.stringify(I).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return stylize(v,"string");case"number":return stylize(""+I,"number");case"boolean":return stylize(""+I,"boolean")}if(I===null){return stylize("null","null")}if(I instanceof Document){return(new XMLSerializer()).serializeToString(I)}var C=Object.keys(I);var J=r?Object.getOwnPropertyNames(I):C;if(typeof I==="function"&&J.length===0){var w=I.name?": "+I.name:"";return stylize("[Function"+w+"]","special")}if(n(I)&&J.length===0){return stylize(""+I,"regexp")}if(q(I)&&J.length===0){return stylize(I.toUTCString(),"date")}var y,G,D;if(o(I)){G="Array";D=["[","]"]}else{G="Object";D=["{","}"]}if(typeof I==="function"){var B=I.name?": "+I.name:"";y=" [Function"+B+"]"}else{y=""}if(n(I)){y=" "+I}if(q(I)){y=" "+I.toUTCString()}if(J.length===0){return D[0]+y+D[1]}if(F<0){if(n(I)){return stylize(""+I,"regexp")}else{return stylize("[Object]","special")}}p.push(I);var A=J.map(function(L){var K,M;if(I.__lookupGetter__){if(I.__lookupGetter__(L)){if(I.__lookupSetter__(L)){M=stylize("[Getter/Setter]","special")}else{M=stylize("[Getter]","special")}}else{if(I.__lookupSetter__(L)){M=stylize("[Setter]","special")}}}if(C.indexOf(L)<0){K="["+L+"]"}if(!M){if(p.indexOf(I[L])<0){if(F===null){M=s(I[L])}else{M=s(I[L],F-1)}if(M.indexOf("\n")>-1){if(o(I)){M=M.split("\n").map(function(N){return"  "+N}).join("\n").substr(2)}else{M="\n"+M.split("\n").map(function(N){return"   "+N}).join("\n")}}}else{M=stylize("[Circular]","special")}}if(typeof K==="undefined"){if(G==="Array"&&L.match(/^\d+$/)){return M}K=JSON.stringify(""+L);if(K.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){K=K.substr(1,K.length-2);K=stylize(K,"name")}else{K=K.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");K=stylize(K,"string")}}return K+": "+M});p.pop();var H=0;var z=A.reduce(function(K,L){H++;if(L.indexOf("\n")>=0){H++}return K+L.length+1},0);if(z>50){A=D[0]+(y===""?"":y+"\n ")+" "+A.join(",\n  ")+" "+D[1]}else{A=D[0]+y+" "+A.join(", ")+" "+D[1]}return A}catch(E){return"[No string representation]"}}return s(t,(typeof u==="undefined"?2:u))};var h=function(o,p){if("logging" in k.config){var n=k.config.logging.marker||"FORGE"}else{var n="FORGE"}o="["+n+"] "+(o.indexOf("\n")===-1?"":"\n")+o;g.priv.call("logging.log",{message:o,level:p});if(typeof console!=="undefined"){switch(p){case 10:if(console.debug!==undefined&&!(console.debug.toString&&console.debug.toString().match("alert"))){console.debug(o)}break;case 30:if(console.warn!==undefined&&!(console.warn.toString&&console.warn.toString().match("alert"))){console.warn(o)}break;case 40:case 50:if(console.error!==undefined&&!(console.error.toString&&console.error.toString().match("alert"))){console.error(o)}break;default:case 20:if(console.info!==undefined&&!(console.info.toString&&console.info.toString().match("alert"))){console.info(o)}break}}};var a=function(n,o){if(n in k.logging.LEVELS){return k.logging.LEVELS[n]}else{k.logging.__logMessage("Unknown configured logging level: "+n);return o}};var b=function(o){var r=function(s){if(s.message){return s.message}else{if(s.description){return s.description}else{return""+s}}};if(o){var q="\nError: "+r(o);try{if(o.lineNumber){q+=" on line number "+o.lineNumber}if(o.fileName){var n=o.fileName;q+=" in file "+n.substr(n.lastIndexOf("/")+1)}}catch(p){}if(o.stack){q+="\r\nStack trace:\r\n"+o.stack}return q}return""};k.logging={LEVELS:{ALL:0,DEBUG:10,INFO:20,WARNING:30,ERROR:40,CRITICAL:50},debug:function(o,n){k.logging.log(o,n,k.logging.LEVELS.DEBUG)},info:function(o,n){k.logging.log(o,n,k.logging.LEVELS.INFO)},warning:function(o,n){k.logging.log(o,n,k.logging.LEVELS.WARNING)},error:function(o,n){k.logging.log(o,n,k.logging.LEVELS.ERROR)},critical:function(o,n){k.logging.log(o,n,k.logging.LEVELS.CRITICAL)},log:function(o,n,r){if(typeof(r)==="undefined"){var r=k.logging.LEVELS.INFO}try{var p=a(k.config.logging.level,k.logging.LEVELS.ALL)}catch(q){var p=k.logging.LEVELS.ALL}if(r>=p){h(d(o,false,10)+b(n),r)}}};var l=function(r){if(r=="<all_urls>"){r="*://*"}r=r.split("://");var n=r[0];var p,q;if(r[1].indexOf("/")===-1){p=r[1];q=""}else{p=r[1].substring(0,r[1].indexOf("/"));q=r[1].substring(r[1].indexOf("/"))}var o="";if(n=="*"){o+=".*://"}else{o+=n+"://"}if(p=="*"){o+=".*"}else{if(p.indexOf("*.")===0){o+="(.+.)?"+p.substring(2)}else{o+=p}}o+=q.replace(/\*/g,".*");return"^"+o+"$"};k.tabs={open:function(o,p,q,n){if(typeof p==="function"){n=q;q=p;p=false}g.priv.call("tabs.open",{url:o,keepFocus:p},q,n)},openWithOptions:function(o,q,n){var p=undefined;if(o.pattern){o.pattern=l(o.pattern)}g.priv.call("tabs.open",o,q,n)},closeCurrent:function(n){n=arguments[1]||n;var o=k.tools.UUID();location.hash=o;g.priv.call("tabs.closeCurrent",{hash:o},null,n)}};k.prefs={get:function(o,p,n){g.priv.call("prefs.get",{key:o.toString()},p&&function(q){if(q==="undefined"){q=undefined}else{try{q=JSON.parse(q)}catch(r){n({message:r.toString()});return}}p(q)},n)},set:function(o,p,q,n){if(p===undefined){p="undefined"}else{p=JSON.stringify(p)}g.priv.call("prefs.set",{key:o.toString(),value:p},q,n)},keys:function(o,n){g.priv.call("prefs.keys",{},o,n)},all:function(o,n){var o=o&&function(p){for(key in p){if(p[key]==="undefined"){p[key]=undefined}else{p[key]=JSON.parse(p[key])}}o(p)};g.priv.call("prefs.all",{},o,n)},clear:function(o,p,n){g.priv.call("prefs.clear",{key:o.toString()},p,n)},clearAll:function(o,n){g.priv.call("prefs.clearAll",{},o,n)}};k.file={getImage:function(o,p,n){if(typeof o==="function"){n=p;p=o;o={}}if(!o){o={}}g.priv.call("file.getImage",o,p&&function(r){var q={uri:r,name:"Image",type:"image"};if(o.width){q.width=o.width}if(o.height){q.height=o.height}p(q)},n)},getVideo:function(o,p,n){if(typeof o==="function"){n=p;p=o;o={}}if(!o){o={}}g.priv.call("file.getVideo",o,p&&function(r){var q={uri:r,name:"Video",type:"video"};p(q)},n)},getLocal:function(o,p,n){k.tools.getURL(o,function(q){p({uri:q,name:o})},n)},base64:function(o,p,n){g.priv.call("file.base64",o,p,n)},string:function(o,p,n){k.request.ajax({url:o.uri,success:p,error:n})},URL:function(p,q,r,o){if(typeof q==="function"){o=r;r=q}var n={};for(prop in p){n[prop]=p[prop]}n.height=q.height||p.height||undefined;n.width=q.width||p.width||undefined;g.priv.call("file.URL",n,r,o)},isFile:function(o,p,n){if(!o||!("uri" in o)){p(false)}else{g.priv.call("file.isFile",o,p,n)}},cacheURL:function(o,p,n){g.priv.call("file.cacheURL",{url:o},p&&function(q){p({uri:q})},n)},remove:function(o,p,n){g.priv.call("file.remove",o,p,n)},clearCache:function(o,n){g.priv.call("file.clearCache",{},o,n)}};var i={};g.currentOrientation=i;g.currentConnectionState=i;k.event={menuPressed:{addListener:function(o,n){g.addEventListener("menuPressed",o)}},messagePushed:{addListener:function(o,n){g.addEventListener("event.messagePushed",o)}},orientationChange:{addListener:function(o,n){g.addEventListener("event.orientationChange",o);if(g.currentOrientation!==i){g.priv.receive({event:"event.orientationChange"})}}},connectionStateChange:{addListener:function(o,n){g.addEventListener("event.connectionStateChange",o);if(g.currentConnectionState!==i){g.priv.receive({event:"event.connectionStateChange"})}}}};k.contact={select:function(o,n){g.priv.call("contact.select",{},o,n)}};k.geolocation={getCurrentPosition:function(q,p,r){if(typeof(q)==="object"){var o=q,s=p,n=r}else{var s=q,n=p,o=r}return navigator.geolocation.getCurrentPosition(s,n,o)}};k.internal={ping:function(o,p,n){g.priv.call("internal.ping",{data:[o]},p,n)}};k.sms={send:function(q,p,n){if(q.to&&typeof q.to=="string"){q.to=[q.to]}var o={body:q.body||"",to:q.to||[]};g.priv.call("sms.send",o,p,n)}};k.topbar={show:function(o,n){g.priv.call("topbar.show",{},o,n)},hide:function(o,n){g.priv.call("topbar.hide",{},o,n)},setTitle:function(p,o,n){g.priv.call("topbar.setTitle",{title:p},o,n)},setTitleImage:function(o,p,n){if(o&&o[0]==="/"){o=o.substr(1)}g.priv.call("topbar.setTitleImage",{icon:o},p,n)},setTint:function(n,p,o){g.priv.call("topbar.setTint",{color:n},p,o)},addButton:function(o,p,n){if(o.icon&&o.icon[0]==="/"){o.icon=o.icon.substr(1)}g.priv.call("topbar.addButton",o,function(q){p&&g.addEventListener("topbar.buttonPressed."+q,p)},n)},removeButtons:function(o,n){g.priv.call("topbar.removeButtons",{},o,n)},homePressed:{addListener:function(o,n){g.addEventListener("topbar.homePressed",o)}}};k.tabbar={show:function(o,n){g.priv.call("tabbar.show",{},o,n)},hide:function(o,n){g.priv.call("tabbar.hide",{},o,n)},addButton:function(p,o,n){if(p.icon&&p.icon[0]==="/"){p.icon=p.icon.substr(1)}g.priv.call("tabbar.addButton",p,function(q){o&&o({remove:function(s,r){g.priv.call("tabbar.removeButton",{id:q},s,r)},setActive:function(s,r){g.priv.call("tabbar.setActive",{id:q},s,r)},onPressed:{addListener:function(s,r){g.addEventListener("tabbar.buttonPressed."+q,s)}}})},n)},removeButtons:function(o,n){g.priv.call("tabbar.removeButtons",{},o,n)},setTint:function(n,p,o){g.priv.call("tabbar.setTint",{color:n},p,o)},setActiveTint:function(n,p,o){g.priv.call("tabbar.setActiveTint",{color:n},p,o)},setInactive:function(o,n){g.priv.call("tabbar.setInactive",{},o,n)}};k.media={videoPlay:function(o,p,n){if(!o.uri){o={uri:o}}g.priv.call("media.videoPlay",o,p,n)}};k.payments={purchaseProduct:function(o,p,n){g.priv.call("payments.purchaseProduct",{product:o},p,n)},restoreTransactions:function(o,n){g.priv.call("payments.restoreTransactions",{},o,n)},transactionReceived:{addListener:function(o,n){g.addEventListener("payments.transactionReceived",function(q){var p=function(){if(q.notificationId){g.priv.call("payments.confirmNotification",{id:q.notificationId})}};o(q,p)})}}};k.document={reload:function(){return document.location.reload()},location:function(o,n){o(document.location)}};g.priv.send=function(o){if(window.__forge["callJavaFromJavaScript"]===undefined){return}var n=((o.params!==undefined)?JSON.stringify(o.params):"");window.__forge["callJavaFromJavaScript"](o.callid,o.method,n)};g.priv.get=function(){var n=JSON.parse(window.__forge["getObjects"]());n.forEach(function(o){g.priv.receive(o)})};window.addEventListener("load",function(){g.priv.call("internal.hideLaunchImage",{},function(){},function(){})},false);g.addEventListener("internal.orientationChange",function(n){if(g.currentOrientation!=n.orientation){g.currentOrientation=n.orientation;g.priv.receive({event:"event.orientationChange"})}});g.addEventListener("internal.connectionStateChange",function(n){if(n.connected!=g.currentConnectionState.connected||n.wifi!=g.currentConnectionState.wifi){g.currentConnectionState=n;g.priv.receive({event:"event.connectionStateChange"})}});k.is.mobile=function(){return true};k.is.android=function(){return true};k.is.orientation.portrait=function(){return g.currentOrientation=="portrait"};k.is.orientation.landscape=function(){return g.currentOrientation=="landscape"};k.is.connection.connected=function(){return g.currentConnectionState.connected};k.is.connection.wifi=function(){return g.currentConnectionState.wifi};k.tools.getURL=function(p,n,o){p=p.toString();if(p.indexOf("http://")===0||p.indexOf("https://")===0){n(p)}else{n("file:///android_asset/src"+((p.indexOf("/")===0)?p:("/"+p)))}};k.request.ajax=function(p){var t=(p.files?p.files:null);var D=(p.fileUploadMethod?p.fileUploadMethod:"multipart");var s=(p.url?p.url:null);var u=(p.success?p.success:undefined);var C=(p.error?p.error:undefined);var r=(p.username?p.username:null);var n=(p.password?p.password:null);var H=(p.accepts?p.accepts:["*/*"]);var z=(p.cache?p.cache:false);var F=(p.contentType?p.contentType:null);var I=(p.data?p.data:null);var B=(p.dataType?p.dataType:null);var o=(p.headers?p.headers:{});var v=(p.timeout?p.timeout:60000);var q=(p.type?p.type:"GET");if(typeof H==="string"){H=[H]}var E=null;if(t){q="POST";if(D=="multipart"){E=k.tools.UUID().replace(/-/g,"");I=g.generateMultipartString(I,E);F="multipart/form-data; boundary="+E}else{if(D=="raw"){if(t.length>1){k.logging.warning("Only one file can be uploaded at once with type 'raw'");t=[t[0]]}I=null;F="image/jpg"}}}else{if(q=="GET"){s=g.generateURI(s,I);I=null}else{if(I){I=g.generateQueryString(I);if(!F){F="application/x-www-form-urlencoded"}}}}if(z){z={};z["wm"+Math.random()]=Math.random();s=g.generateURI(s,z)}if(H){o.Accept=H.join(",")}if(F){o["Content-Type"]=F}var A={};if(window._forgeDebug){try{A.id=k.tools.UUID();A.fromUrl=window.location.href;A.reqTime=(new Date()).getTime()/1000;A.method=q;A.data=I;A.url=s;_forgeDebug.wi.NetworkNotify.identifierForInitialRequest(A.id,A.url,{url:A.fromUrl,frameId:0,loaderId:0},[]);_forgeDebug.wi.NetworkNotify.willSendRequest(A.id,A.reqTime,{url:A.url,httpMethod:A.method,httpHeaderFields:{},requestFormData:A.data},{isNull:true})}catch(G){}}var y=false;var w=setTimeout(function(){if(y){return}y=true;if(window._forgeDebug){try{A.respTime=(new Date()).getTime()/1000;A.respText=I;_forgeDebug.wi.NetworkNotify.didReceiveResponse(A.id,A.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Failure",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false,});_forgeDebug.wi.NetworkNotify.setInitialContent(A.id,A.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(A.id,A.respTime)}catch(J){}}C&&C({message:"Request timed out",type:"EXPECTED_FAILURE"})},v);g.priv.call("request.ajax",{url:s,username:r,password:n,data:I,headers:o,timeout:v,type:q,boundary:E,files:t,fileUploadMethod:D},function(L){clearTimeout(w);if(y){return}y=true;if(window._forgeDebug){try{A.respTime=(new Date()).getTime()/1000;A.respText=L;_forgeDebug.wi.NetworkNotify.didReceiveResponse(A.id,A.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Success",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false,});_forgeDebug.wi.NetworkNotify.setInitialContent(A.id,A.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(A.id,A.respTime)}catch(M){}}try{if(B=="xml"){var K,J;if(window.DOMParser){K=new DOMParser();J=K.parseFromString(L,"text/xml")}else{J=new ActiveXObject("Microsoft.XMLDOM");J.async="false";J.loadXML(L)}L=J}else{if(B=="json"){L=JSON.parse(L)}}}catch(M){}u&&u(L)},function(){clearTimeout(w);if(y){return}y=true;if(window._forgeDebug){try{A.respTime=(new Date()).getTime()/1000;A.respText=I;_forgeDebug.wi.NetworkNotify.didReceiveResponse(A.id,A.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Failure",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false,});_forgeDebug.wi.NetworkNotify.setInitialContent(A.id,A.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(A.id,A.respTime)}catch(J){}}C&&C.apply(this,arguments)})};k.file.getLocal=function(o,p,n){g.priv.call("file.getLocal",{name:o},p,n)};k.file.string=function(o,p,n){g.priv.call("file.string",o,p,n)};window.forge={config:k.config,enableDebug:k.enableDebug,is:{mobile:k.is.mobile,desktop:k.is.desktop,android:k.is.android,ios:k.is.ios,chrome:k.is.chrome,firefox:k.is.firefox,safari:k.is.safari,ie:k.is.ie,web:k.is.web,orientation:{portrait:k.is.orientation.portrait,landscape:k.is.orientation.landscape},connection:{connected:k.is.connection.connected,wifi:k.is.connection.wifi}},message:{listen:k.message.listen,broadcast:k.message.broadcast,broadcastBackground:k.message.broadcastBackground,toFocussed:k.message.toFocussed},notification:{create:k.notification.create},request:{get:k.request.get,ajax:k.request.ajax},logging:{log:k.logging.log,debug:k.logging.debug,info:k.logging.info,warning:k.logging.warning,error:k.logging.error,critical:k.logging.critical},tabs:{open:k.tabs.open,openWithOptions:k.tabs.openWithOptions,closeCurrent:k.tabs.closeCurrent},tools:{UUID:k.tools.UUID,getURL:k.tools.getURL},prefs:{get:k.prefs.get,set:k.prefs.set,clear:k.prefs.clear,clearAll:k.prefs.clearAll,keys:k.prefs.keys},button:{setIcon:k.button.setIcon,setURL:k.button.setURL,onClicked:{addListener:k.button.onClicked.addListener},setBadge:k.button.setBadge,setBadgeBackgroundColor:k.button.setBadgeBackgroundColor,setTitle:k.button.setTitle},file:{getImage:k.file.getImage,getVideo:k.file.getVideo,getLocal:k.file.getLocal,isFile:k.file.isFile,URL:k.file.URL,base64:k.file.base64,string:k.file.string,cacheURL:k.file.cacheURL,remove:k.file.remove,clearCache:k.file.clearCache},media:{videoPlay:k.media.videoPlay},event:{menuPressed:{addListener:k.event.menuPressed.addListener},messagePushed:{addListener:k.event.messagePushed.addListener},orientationChange:{addListener:k.event.orientationChange.addListener},connectionStateChange:{addListener:k.event.connectionStateChange.addListener}},contact:{select:k.contact.select},geolocation:{getCurrentPosition:k.geolocation.getCurrentPosition},internal:{ping:k.internal.ping},sms:{send:k.sms.send},topbar:{show:k.topbar.show,hide:k.topbar.hide,setTitle:k.topbar.setTitle,setTitleImage:k.topbar.setTitleImage,setTint:k.topbar.setTint,addButton:k.topbar.addButton,removeButtons:k.topbar.removeButtons,homePressed:{addListener:k.topbar.homePressed.addListener}},tabbar:{show:k.tabbar.show,hide:k.tabbar.hide,addButton:k.tabbar.addButton,removeButtons:k.tabbar.removeButtons,setTint:k.tabbar.setTint,setActiveTint:k.tabbar.setActiveTint,setInactive:k.tabbar.setInactive},payments:{purchaseProduct:k.payments.purchaseProduct,restoreTransactions:k.payments.restoreTransactions,transactionReceived:{addListener:k.payments.transactionReceived.addListener}},media:{videoPlay:k.media.videoPlay},document:{reload:k.document.reload,location:k.document.location}};window.forge["ajax"]=k.request.ajax;window.forge["getPage"]=k.request.get;window.forge["createNotification"]=k.notification.create;window.forge["UUID"]=k.tools.UUID;window.forge["getURL"]=k.tools.getURL;window.forge["log"]=k.logging.log;window.forge["button"]["setUrl"]=k.button.setURL;window.forge["button"]["setBadgeText"]=k.button.setBadge;window.forge["file"]["delete"]=k.file.remove;window.forge["file"]["imageURL"]=k.file.URL;window.forge["_get"]=g.priv.get;window.forge["_receive"]=function(){var n=arguments;if(typeof window.setZeroTimeout==="undefined"){setTimeout(function(){g.priv.receive.apply(this,n)},0)}else{setZeroTimeout(function(){g.priv.receive.apply(this,n)})}};window.forge["_dispatchMessage"]=g.dispatchMessage})();